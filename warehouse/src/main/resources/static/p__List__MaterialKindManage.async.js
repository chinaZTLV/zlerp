(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"KuK/":function(e,a,t){"use strict";t.r(a);var l,r,n,i,s,o,d,c,u=t("jehZ"),m=t.n(u),p=(t("IzEo"),t("bx4M")),h=(t("14J3"),t("BMrR")),f=(t("+L6B"),t("2/Rp")),b=(t("jCWc"),t("kPKH")),y=(t("miYZ"),t("tsqr")),v=(t("P2fV"),t("NJEC")),g=(t("/zsF"),t("PArb")),E=t("p0pE"),C=t.n(E),V=t("2Taf"),w=t.n(V),M=t("vZ4D"),k=t.n(M),S=t("l4Ni"),x=t.n(S),F=t("ujKo"),I=t.n(F),N=t("MhPg"),K=t.n(N),D=(t("2qtc"),t("kLXV")),q=(t("OaEy"),t("2fM7")),P=(t("5NDa"),t("5rEg")),U=(t("y8nQ"),t("Vl3Y")),R=t("q1tI"),z=t.n(R),O=t("MuoO"),T=t("wd/R"),A=t.n(T),L=t("CkN6"),Y=t("zHco"),j=(t("7ntv"),t("z8EN")),H=t.n(j),J=U["a"].Item,B=P["a"].TextArea,Z=q["a"].Option,Q=U["a"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.consumerNames,i=function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})};return z.a.createElement(D["a"],{destroyOnClose:!0,title:"\u65b0\u589e",visible:a,onOk:i,onCancel:function(){return r()}},console.log("consumerNames11",n),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7269\u6599\u540d\u79f0"},t.getFieldDecorator("productKindName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a20\u4e2a\u5b57\u7b26\u7684\u7269\u6599\u540d\u79f0\uff01",max:20}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u540d\u79f0"},t.getFieldDecorator("consumerId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba2\u6237\u540d\u79f0"}]})(z.a.createElement(q["a"],{style:{width:"100%"}},n&&n.length>0?n.map(function(e){return z.a.createElement(Z,{key:e.key,value:e.key},e.value)}):""))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7269\u6599\u8fdb\u4ef7\uff08\u5143\uff09"},t.getFieldDecorator("purchasePrice",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a8\u4e2a\u5b57\u7b26\u7684\u7269\u6599\u8fdb\u4ef7\uff01",max:8}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7269\u6599\u552e\u4ef7\uff08\u5143\uff09"},t.getFieldDecorator("sellingPrice",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a8\u4e2a\u5b57\u7b26\u7684\u7269\u6599\u552e\u4ef7\uff01",max:8}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u552e\u8d27\u5355\u4f4d"},t.getFieldDecorator("unit",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u552e\u8d27\u5355\u4f4d\uff01",max:5}]})(z.a.createElement(q["a"],{style:{width:"100%"}},z.a.createElement(Z,{value:"0"},"\u5757"),z.a.createElement(Z,{value:"1"},"\u4e2a"),z.a.createElement(Z,{value:"2"},"\u7c73"),z.a.createElement(Z,{value:"3"},"\u5e73\u65b9")))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5907\u6ce8\u4fe1\u606f"},t.getFieldDecorator("remark",{rules:[{message:"\u5907\u6ce8\u4fe1\u606f\u6700\u591a\u53ef\u8f93\u516560\u5b57\u7b26\uff01",max:60}]})(z.a.createElement(B,{rows:4}))))}),W=(l=U["a"].create(),l((i=n=function(e){function a(e){var t;return w()(this,a),t=x()(this,I()(a).call(this,e)),t.okHandle=function(){form.validateFields(function(e,a){e||(form.resetFields(),handleAdd(a))})},t.handleNext=function(e){var a=t.props,l=a.form,r=a.handleUpdate,n=t.state.formVals;l.validateFields(function(a,l){if(!a){var i=C()({},n,l);t.setState({formVals:i},function(){e<2?t.forward():r(i)})}})},t.backward=function(){var e=t.state.currentStep;t.setState({currentStep:e-1})},t.forward=function(){var e=t.state.currentStep;t.setState({currentStep:e+1})},t.renderContent=function(e,a){var l=t.props,r=l.form,n=l.consumerNames;return[z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7269\u6599\u540d\u79f0"},r.getFieldDecorator("productKindName",{initialValue:a.productKindName,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a20\u4e2a\u5b57\u7b26\u7684\u7269\u6599\u540d\u79f0\uff01",max:20}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u540d\u79f0"},r.getFieldDecorator("consumerId",{initialValue:a.consumerId,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba2\u6237\u540d\u79f0"}]})(z.a.createElement(q["a"],{style:{width:"100%"}},n&&n.length>0?n.map(function(e){return z.a.createElement(Z,{key:e.key,value:e.key},e.value)}):""))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7269\u6599\u8fdb\u4ef7\uff08\u5143\uff09"},r.getFieldDecorator("purchasePrice",{initialValue:a.purchasePrice,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a8\u4e2a\u5b57\u7b26\u7684\u7269\u6599\u8fdb\u4ef7\uff01",max:8}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7269\u6599\u552e\u4ef7\uff08\u5143\uff09"},r.getFieldDecorator("sellingPrice",{initialValue:a.sellingPrice,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a8\u4e2a\u5b57\u7b26\u7684\u7269\u6599\u552e\u4ef7\uff01",max:8}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u552e\u8d27\u5355\u4f4d"},r.getFieldDecorator("unit",{initialValue:"\u5757"==a.unit?"0":"\u4e2a"==a.unit?"1":"\u7c73"==a.unit?"2":"3",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u552e\u8d27\u5355\u4f4d\uff01",max:5}]})(z.a.createElement(q["a"],{style:{width:"100%"}},z.a.createElement(Z,{value:"0"},"\u5757"),z.a.createElement(Z,{value:"1"},"\u4e2a"),z.a.createElement(Z,{value:"2"},"\u7c73"),z.a.createElement(Z,{value:"3"},"\u5e73\u65b9")))),z.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5907\u6ce8\u4fe1\u606f"},r.getFieldDecorator("remark",{initialValue:a.remark,rules:[{message:"\u5907\u6ce8\u4fe1\u606f\u6700\u591a\u53ef\u8f93\u516560\u5b57\u7b26\uff01",max:60}]})(z.a.createElement(B,{rows:4})))]},t.state={formVals:{consumerId:e.values.consumerId,consumerIds:e.values.consumerIds,consumerName:e.values.consumerName,createTime:e.values.createTime,productKindId:e.values.productKindId,productKindName:e.values.productKindName,purchasePrice:e.values.purchasePrice,remark:e.values.remark,sellingPrice:e.values.sellingPrice,unit:e.values.unit,updateTime:e.values.updateTime},currentStep:0},t.formLayout={labelCol:{span:7},wrapperCol:{span:13}},t}return K()(a,e),k()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.updateModalVisible,l=a.handleUpdateModalVisible,r=a.values,n=a.form,i=a.handleUpdate,s=this.state,o=s.currentStep,d=s.formVals,c=function(){var a=e.state.formVals;n.validateFields(function(t,l){if(console.log("fieldsValue",l),!t){var r=C()({},a,l);e.setState({formVals:r}),i(r)}})};return z.a.createElement(D["a"],{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u4fee\u6539",visible:t,onCancel:function(){return l(!1,r)},afterClose:function(){return l()},onOk:c},this.renderContent(o,d))}}]),a}(R["PureComponent"]),n.defaultProps={handleUpdate:function(){},handleUpdateModalVisible:function(){},values:{}},r=i))||r),X=(s=Object(O["connect"])(function(e){var a=e.material,t=e.loading;return{material:a,loading:t.models.material}}),o=U["a"].create(),s(d=o((c=function(e){function a(){var e,t;w()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=x()(this,(e=I()(a)).call.apply(e,[this].concat(r))),t.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{},consumerNames:{}},t.columns=[{title:"\u7269\u6599\u7f16\u53f7",dataIndex:"productKindId"},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"productKindName"},{title:"\u5ba2\u6237\u540d\u79f0",dataIndex:"consumerName"},{title:"\u7269\u6599\u8fdb\u4ef7\uff08\u5143\uff09",dataIndex:"purchasePrice"},{title:"\u7269\u6599\u552e\u4ef7\uff08\u5143\uff09",dataIndex:"sellingPrice"},{title:"\u552e\u8d27\u5355\u4f4d",dataIndex:"unit"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",render:function(e){return z.a.createElement("span",null,A()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u5907\u6ce8\u4fe1\u606f",dataIndex:"remark"},{title:"\u64cd\u4f5c",render:function(e,a){return z.a.createElement(R["Fragment"],null,z.a.createElement("a",{onClick:function(){return t.handleUpdateModalVisible(!0,a)}},"\u4fee\u6539"),z.a.createElement(g["a"],{type:"vertical"}),z.a.createElement(v["a"],{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:function(){return t.deleteInfo(a)}},z.a.createElement("a",null,"\u5220\u9664")))}}],t.handleStandardTableChange=function(e){var a=t.props.dispatch;a({type:"material/queryMaterialKind",payload:{body:{},header:{},pageIndex:e.current,pageSize:e.pageSize}})},t.handleFormReset=function(){var e=t.props,a=e.form,l=e.dispatch;a.resetFields(),t.setState({formValues:{}}),l({type:"material/queryMaterialKind",payload:{body:{},header:{},pageIndex:1,pageSize:10}})},t.handleMenuClick=function(e){var a=t.props.dispatch,l=t.state.selectedRows;if(0!==l.length)switch(e.key){case"remove":a({type:"material/remove",payload:{key:l.map(function(e){return e.key})},callback:function(){t.setState({selectedRows:[]})}});break;default:break}},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props,l=a.dispatch,r=a.form;r.validateFields(function(e,a){if(!e){var r=C()({},a);t.setState({formValues:r}),console.log("values",r),l({type:"material/queryMaterialKind",payload:{body:r,header:{},pageIndex:1,pageSize:10}})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e,stepFormValues:a||{}})},t.deleteInfo=function(e){var a=t.props.dispatch;a({type:"material/deleteMaterialKind",payload:{body:e,header:{}}}).then(function(e){console.log("res",e),""!=e&&null!=e&&void 0!=e?"0"==e.resultCode?(y["a"].success("\u5220\u9664\u6210\u529f"),t.handleModalVisible(),a({type:"material/queryMaterialKind",payload:{body:{},header:{},pageIndex:1,pageSize:10}})):y["a"].error(e.resultDesc):y["a"].error("\u64cd\u4f5c\u5931\u8d25")})},t.handleAdd=function(e){var a=t.props.dispatch;a({type:"material/addOrUpdateMaterialKind",payload:{body:e,header:{}}}).then(function(e){console.log("res",e),""!=e&&null!=e&&void 0!=e?"0"==e.resultCode?(y["a"].success("\u6dfb\u52a0\u6210\u529f"),t.handleModalVisible(),a({type:"material/queryMaterialKind",payload:{body:{},header:{},pageIndex:1,pageSize:10}})):y["a"].error(e.resultDesc):y["a"].error("\u64cd\u4f5c\u5931\u8d25")})},t.handleUpdate=function(e){console.log("fields",e);var a=t.props.dispatch;a({type:"material/addOrUpdateMaterialKind",payload:{body:e,header:{}}}).then(function(e){""!=e&&null!=e&&void 0!=e?"0"==e.resultCode?(y["a"].success("\u4fee\u6539\u6210\u529f"),t.handleUpdateModalVisible(),a({type:"material/queryMaterialKind",payload:{body:{},header:{},pageIndex:1,pageSize:10}})):y["a"].error(e.resultDesc):y["a"].error("\u64cd\u4f5c\u5931\u8d25")})},t}return K()(a,e),k()(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.dispatch;a({type:"material/queryMaterialKind",payload:{body:{},header:{},pageIndex:1,pageSize:10}}),a({type:"material/queryConsumerName"}).then(function(a){console.log("res",a),e.setState({consumerNames:a.body})})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return z.a.createElement(U["a"],{onSubmit:this.handleSearch,layout:"inline"},z.a.createElement(h["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(b["a"],{md:8,sm:24},z.a.createElement(J,{label:"\u7269\u6599\u540d\u79f0"},e("productKindName",{rules:[{message:"\u7269\u6599\u540d\u79f0\u6700\u591a\u53ef\u4ee5\u8f93\u516520\u4e2a\u5b57\u7b26\uff01",max:20}]})(z.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),z.a.createElement(b["a"],{md:8,sm:24},z.a.createElement("span",{className:H.a.submitButtons},z.a.createElement(f["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),z.a.createElement(f["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,a=this.props,t=a.material.data,l=(a.loading,this.state),r=l.selectedRows,n=l.modalVisible,i=l.updateModalVisible,s=l.stepFormValues,o={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,consumerNames:this.state.consumerNames},d={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate,consumerNames:this.state.consumerNames};return z.a.createElement(Y["a"],null,z.a.createElement(p["a"],{bordered:!1},z.a.createElement("div",{className:H.a.tableList},z.a.createElement("div",{className:H.a.tableListForm},this.renderForm()),z.a.createElement("div",{className:H.a.tableListOperator},z.a.createElement(f["a"],{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u65b0\u5efa")),z.a.createElement(L["a"],{selectedRows:r,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),z.a.createElement(Q,m()({},o,{modalVisible:n})),s&&Object.keys(s).length?z.a.createElement(W,m()({},d,{updateModalVisible:i,values:s})):null)}}]),a}(R["PureComponent"]),d=c))||d)||d);a["default"]=X}}]);