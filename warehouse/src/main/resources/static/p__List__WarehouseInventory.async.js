(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{HBYe:function(e,a,t){"use strict";t.r(a);var n,l,r,o,s,d,i,c,p=t("jehZ"),u=t.n(p),m=(t("IzEo"),t("bx4M")),h=(t("lUTK"),t("BvKs")),y=(t("14J3"),t("BMrR")),f=(t("+L6B"),t("2/Rp")),v=(t("jCWc"),t("kPKH")),b=(t("miYZ"),t("tsqr")),g=t("p0pE"),E=t.n(g),C=t("2Taf"),V=t.n(C),w=t("vZ4D"),S=t.n(w),k=t("l4Ni"),x=t.n(k),I=t("ujKo"),F=t.n(I),M=t("MhPg"),D=t.n(M),q=(t("2qtc"),t("kLXV")),N=(t("7Kak"),t("9yH6")),U=(t("OaEy"),t("2fM7")),A=(t("5NDa"),t("5rEg")),R=(t("FJo9"),t("L41K")),T=(t("y8nQ"),t("Vl3Y")),z=t("q1tI"),O=t.n(z),P=t("MuoO"),K=t("wd/R"),H=t.n(K),L=t("CkN6"),Y=t("zHco"),j=t("z8EN"),B=t.n(j),J=T["a"].Item,Z=(R["a"].Step,A["a"].TextArea),G=U["a"].Option,Q=(N["a"].Group,T["a"].create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleAdd,l=e.handleModalVisible,r=function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})};return O.a.createElement(q["a"],{destroyOnClose:!0,title:"\u65b0\u589e",visible:a,onOk:r,onCancel:function(){return l()}},O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u540d\u79f0"},t.getFieldDecorator("consumerName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a20\u4e2a\u5b57\u7b26\u7684\u5ba2\u6237\u540d\u79f0\uff01",max:20}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u7c7b\u578b"},t.getFieldDecorator("consumerType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba2\u6237\u7c7b\u578b\uff01",max:5}]})(O.a.createElement(U["a"],{style:{width:"100%"}},O.a.createElement(G,{value:"0"},"\u5382\u65b9"),O.a.createElement(G,{value:"1"},"\u5ba2\u6237")))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8054\u7cfb\u65b9\u5f0f"},t.getFieldDecorator("contactPhone",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a11\u4e2a\u5b57\u7b26\u7684\u8054\u7cfb\u65b9\u5f0f\uff01",max:11,min:11}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8054\u7cfb\u5730\u5740"},t.getFieldDecorator("contactAddr",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a20\u4e2a\u5b57\u7b26\u7684\u8054\u7cfb\u5730\u5740\uff01",max:20}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5907\u6ce8\u4fe1\u606f"},t.getFieldDecorator("remark",{rules:[{message:"\u5907\u6ce8\u4fe1\u606f\u6700\u591a\u53ef\u8f93\u516560\u5b57\u7b26\uff01",max:60}]})(O.a.createElement(Z,{rows:4}))))})),W=(n=T["a"].create(),n((o=r=function(e){function a(e){var t;return V()(this,a),t=x()(this,F()(a).call(this,e)),t.okHandle=function(){form.validateFields(function(e,a){e||(form.resetFields(),handleAdd(a))})},t.handleNext=function(e){var a=t.props,n=a.form,l=a.handleUpdate,r=t.state.formVals;n.validateFields(function(a,n){if(!a){var o=E()({},r,n);t.setState({formVals:o},function(){e<2?t.forward():l(o)})}})},t.backward=function(){var e=t.state.currentStep;t.setState({currentStep:e-1})},t.forward=function(){var e=t.state.currentStep;t.setState({currentStep:e+1})},t.renderContent=function(e,a){var n=t.props.form;return[O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u540d\u79f0"},n.getFieldDecorator("consumerName",{initialValue:a.consumerName,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a20\u4e2a\u5b57\u7b26\u7684\u5ba2\u6237\u540d\u79f0\uff01",max:20}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u7c7b\u578b"},n.getFieldDecorator("consumerType",{initialValue:"\u5382\u65b9"==a.consumerType?"0":"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba2\u6237\u7c7b\u578b\uff01",max:5}]})(O.a.createElement(U["a"],{style:{width:"100%"}},O.a.createElement(G,{value:"0"},"\u5382\u65b9"),O.a.createElement(G,{value:"1"},"\u5ba2\u6237")))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8054\u7cfb\u65b9\u5f0f"},n.getFieldDecorator("contactPhone",{initialValue:a.contactPhone,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a11\u4e2a\u5b57\u7b26\u7684\u8054\u7cfb\u65b9\u5f0f\uff01",max:11,min:11}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8054\u7cfb\u5730\u5740"},n.getFieldDecorator("contactAddr",{initialValue:a.contactAddr,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6700\u591a20\u4e2a\u5b57\u7b26\u7684\u8054\u7cfb\u5730\u5740\uff01",max:20}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),O.a.createElement(J,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5907\u6ce8\u4fe1\u606f"},n.getFieldDecorator("remark",{initialValue:a.remark,rules:[{message:"\u5907\u6ce8\u4fe1\u606f\u6700\u591a\u53ef\u8f93\u516560\u5b57\u7b26\uff01",max:60}]})(O.a.createElement(Z,{rows:4})))]},t.state={formVals:{consumerId:e.values.consumerId,consumerName:e.values.consumerName,consumerType:e.values.consumerType,contactAddr:e.values.contactAddr,contactPhone:e.values.contactPhone,createTime:e.values.createTime,remark:e.values.remark},currentStep:0},t.formLayout={labelCol:{span:7},wrapperCol:{span:13}},t}return D()(a,e),S()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.updateModalVisible,n=a.handleUpdateModalVisible,l=a.values,r=a.form,o=a.handleUpdate,s=this.state,d=s.currentStep,i=s.formVals,c=function(){var a=e.state.formVals;r.validateFields(function(t,n){if(console.log("fieldsValue",n),!t){var l=E()({},a,n);e.setState({formVals:l}),o(l)}})};return O.a.createElement(q["a"],{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u4fee\u6539",visible:t,onCancel:function(){return n(!1,l)},afterClose:function(){return n()},onOk:c},this.renderContent(d,i))}}]),a}(z["PureComponent"]),r.defaultProps={handleUpdate:function(){},handleUpdateModalVisible:function(){},values:{}},l=o))||l),X=(s=Object(P["connect"])(function(e){var a=e.inventory,t=e.loading;return{inventory:a,loading:t.models.inventory}}),d=T["a"].create(),s(i=d((c=function(e){function a(){var e,t;V()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=x()(this,(e=F()(a)).call.apply(e,[this].concat(l))),t.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{}},t.columns=[{title:"\u5e93\u5b58\u7f16\u53f7",dataIndex:"stockId"},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"productKindName"},{title:"\u5e93\u5b58",dataIndex:"stockNum"},{title:"\u7269\u6599\u5355\u4f4d",dataIndex:"unit"},{title:"\u603b\u91d1\u989d(\u5143) ",dataIndex:"totalAmount"},{title:"\u5382\u5546\u540d\u79f0",dataIndex:"consumerName"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"contactPhone"},{title:"\u8054\u7cfb\u5730\u5740",dataIndex:"contactAddr"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",render:function(e){return O.a.createElement("span",null,H()(e).format("YYYY-MM-DD HH:mm:ss"))}}],t.handleStandardTableChange=function(e){var a=t.props.dispatch;a({type:"inventory/queryInventory",payload:{body:{},header:{},pageIndex:e.current,pageSize:e.pageSize}})},t.handleFormReset=function(){var e=t.props,a=e.form,n=e.dispatch;a.resetFields(),t.setState({formValues:{}}),n({type:"inventory/queryInventory",payload:{body:{},header:{},pageIndex:1,pageSize:10}})},t.handleMenuClick=function(e){var a=t.props.dispatch,n=t.state.selectedRows;if(0!==n.length)switch(e.key){case"remove":a({type:"inventory/remove",payload:{key:n.map(function(e){return e.key})},callback:function(){t.setState({selectedRows:[]})}});break;default:break}},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props,n=a.dispatch,l=a.form;l.validateFields(function(e,a){if(!e){var l=E()({},a);t.setState({formValues:l}),console.log("values",l),n({type:"inventory/queryInventory",payload:{body:l,header:{},pageIndex:1,pageSize:10}})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e,stepFormValues:a||{}})},t.deleteInfo=function(e){var a=t.props.dispatch;a({type:"inventory/deleteConsumer",payload:{body:e,header:{}}}).then(function(e){console.log("res",e),"0"==e.resultCode?(b["a"].success("\u5220\u9664\u6210\u529f"),t.handleModalVisible(),a({type:"inventory/queryInventory",payload:{body:{},header:{},pageIndex:1,pageSize:10}})):b["a"].error(e.resultDesc)})},t.handleAdd=function(e){var a=t.props.dispatch;a({type:"inventory/addOrUpdateConsumer",payload:{body:e,header:{}}}).then(function(e){console.log("res",e),"0"==e.resultCode?(b["a"].success("\u6dfb\u52a0\u6210\u529f"),t.handleModalVisible(),a({type:"inventory/queryInventory",payload:{body:{},header:{},pageIndex:1,pageSize:10}})):b["a"].error(e.resultDesc)})},t.handleUpdate=function(e){console.log("fields",e);var a=t.props.dispatch;a({type:"inventory/addOrUpdateConsumer",payload:{body:e,header:{}}}).then(function(e){console.log("res",e),"0"==e.resultCode?(b["a"].success("\u4fee\u6539\u6210\u529f"),t.handleUpdateModalVisible(),a({type:"inventory/queryInventory",payload:{body:{},header:{},pageIndex:1,pageSize:10}})):b["a"].error(e.resultDesc)})},t}return D()(a,e),S()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"inventory/queryInventory",payload:{body:{},header:{},pageIndex:1,pageSize:10}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return O.a.createElement(T["a"],{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(y["a"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v["a"],{md:8,sm:24},O.a.createElement(J,{label:"\u7269\u6599\u540d\u79f0"},e("productKindName",{rules:[{message:"\u7269\u6599\u540d\u79f0\u6700\u591a\u53ef\u4ee5\u8f93\u516520\u4e2a\u5b57\u7b26\uff01",max:20}]})(O.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),O.a.createElement(v["a"],{md:8,sm:24},O.a.createElement("span",{className:B.a.submitButtons},O.a.createElement(f["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),O.a.createElement(f["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this.props,a=e.inventory.data,t=e.loading,n=this.state,l=n.selectedRows,r=n.modalVisible,o=n.updateModalVisible,s=n.stepFormValues,d=(O.a.createElement(h["a"],{onClick:this.handleMenuClick,selectedKeys:[]},O.a.createElement(h["a"].Item,{key:"remove"},"\u5220\u9664"),O.a.createElement(h["a"].Item,{key:"approval"},"\u6279\u91cf\u5ba1\u6279")),{handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible}),i={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return O.a.createElement(Y["a"],null,O.a.createElement(m["a"],{bordered:!1},O.a.createElement("div",{className:B.a.tableList},O.a.createElement("div",{className:B.a.tableListForm},this.renderForm()),O.a.createElement(L["a"],{selectedRows:l,loading:t,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),O.a.createElement(Q,u()({},d,{modalVisible:r})),s&&Object.keys(s).length?O.a.createElement(W,u()({},i,{updateModalVisible:o,values:s})):null)}}]),a}(z["PureComponent"]),i=c))||i)||i);a["default"]=X}}]);